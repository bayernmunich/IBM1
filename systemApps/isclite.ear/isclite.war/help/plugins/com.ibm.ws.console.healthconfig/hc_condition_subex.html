<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2012" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2012" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="DC.Type" content="topic" />
<meta name="DC.Title" content="Custom health condition subexpression builder" />
<meta name="abstract" content="Use the custom health condition subexpression builder to define a custom health condition for your health policy. Use the build subexpression utility to build complex rule conditions from subexpressions by using AND, OR, NOT and parenthetical grouping. The subexpression builder validates the rule when you apply the changes, and alerts you to mismatched parentheses and unsupported logic operators." />
<meta name="description" content="Use the custom health condition subexpression builder to define a custom health condition for your health policy. Use the build subexpression utility to build complex rule conditions from subexpressions by using AND, OR, NOT and parenthetical grouping. The subexpression builder validates the rule when you apply the changes, and alerts you to mismatched parentheses and unsupported logic operators." />
<meta name="DC.Relation" scheme="URI" content="hc_collection.html" />
<meta name="DC.Relation" scheme="URI" content="hc_detail_main.html" />
<meta name="DC.Relation" scheme="URI" content="hc_detail_main_new.html" />
<meta name="DC.Relation" scheme="URI" content="hc_condition_detail_new.html" />
<meta name="DC.Relation" scheme="URI" content="hc_appservers_detail_new.html" />
<meta name="DC.Relation" scheme="URI" content="hc_action_collection.html" />
<meta name="DC.Relation" scheme="URI" content="hc_custom_action.html" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="hc_condition_subex" />
<meta name="DC.Language" content="en-us" />
<!-- Licensed Materials Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="./ibmdita.css" />
<link rel="stylesheet" type="text/css" href="./swg_info_common.css" />
<title>Custom health condition subexpression builder</title>
<style type="text/css">
        span.stealth { visibility:hidden; }
   </style></head>
<body role="main" class="help" id="hc_condition_subex">
<h1 class="title topictitle1">Custom health condition subexpression builder</h1>
<div class="body"><p class="shortdesc">Use the custom health condition subexpression builder to
define a custom health condition for your health policy. Use the build
subexpression utility to build complex rule conditions from subexpressions
by using AND, OR, NOT and parenthetical grouping. The subexpression
builder validates the rule when you apply the changes, and alerts
you to mismatched parentheses and unsupported logic operators. </p>
<p class="p">To view this administrative console page, click <span class="ph menucascade"><span class="ph uicontrol">Operational polices</span> &gt; <span class="ph uicontrol"> Health policies</span> &gt; <span class="ph uicontrol"> New</span></span>. If you choose a custom
health condition, the <span class="ph uicontrol">Run reaction plan when</span> field
is displayed. Click <span class="ph uicontrol">Subexpression builder</span> to
build the custom health condition.</p>
<p class="p">Select the properties that you want to be in your custom health
condition, and click <span class="ph uicontrol">Generate subexpression</span>.
The subexpression value displays. To append the subexpression to your
custom health condition, click <span class="ph uicontrol">Append</span>.</p>
</div>
<div class="topic nested1" xml:lang="en-us" id="logicaloperator"><h2 class="title topictitle2">Logical operator</h2>
<div class="body"><p class="shortdesc">Specifies the operator that is used to append this subexpression
to the previous subexpression in the custom health condition.</p>
<dl class="dl"><dt class="dt dlterm">and</dt>
<dd class="dd">Both subexpressions that are around the <samp class="ph tt">and</samp> operator
must be true for actions to be taken on the health policy.</dd>
<dt class="dt dlterm">or</dt>
<dd class="dd">To select a node, one of the two subexpressions that are around
the <samp class="ph tt">or</samp> operator must be true for actions to be taken on the
health policy.</dd>
</dl>
</div>
</div>
<div class="topic nested1" xml:lang="en-us" id="operand"><h2 class="title topictitle2">Operand</h2>
<div class="body"><p class="shortdesc"></p>
<ul class="ul"><li class="li"><strong class="ph b">PMI metric: From server start</strong> and <strong class="ph b">PMI metric: From last
interval</strong><p class="p">The <strong class="ph b">PMI metric: From server start operand</strong> uses
an average number of the reported values from the time that the server
started.</p>
<p class="p">The <strong class="ph b">PMI metric: From last interval</strong> operand uses
an average of the reported values in the last interval. The interval
is the length of the health controller cycle.</p>
<p class="p">Both PMI operands
have the following PMI modules:</p>
<ul class="ul"><li class="li"><strong class="ph b">Connection pool module (JDBC)</strong>: <span class="ph">These metrics can only
be used on servers that are running WebSphere® Application Server. </span> The
connection pool module has the following metrics:<ul class="ul"><li class="li"><strong class="ph b">Faults</strong>: Specifies the number of connection timeouts in
the pool.</li>
<li class="li"><strong class="ph b">Number of creates</strong>: Specifies the total number of connections
that are created.</li>
<li class="li"><strong class="ph b">Percent used</strong>: Specifies the average percent of the pool
that is in use. The value is based on the total number of configured
connections in the connection pool, not the current number of connections.</li>
<li class="li"><strong class="ph b">Prepared statement cache discards</strong>: Specifies the number
of statements that are discarded because the cache is full.</li>
<li class="li"><strong class="ph b">Number of destroys</strong>: Specifies the total number of connections
that are closed.</li>
<li class="li"><strong class="ph b">Pool size</strong>: Specifies the size of the connection pool.</li>
<li class="li"><strong class="ph b">Number of connection handles</strong>: Specifies the number of connection
objects that are discarded because the cache is full.</li>
<li class="li"><strong class="ph b">Concurrent waiters</strong>: Specifies the average number of threads
that are waiting for a connection at the same time.</li>
<li class="li"><strong class="ph b">Number of managed connections</strong>: Specifies the number of
ManagedConnection objects that are in use for a particular connection
pool. This metric applies to Version 5.0 data sources only.</li>
<li class="li"><strong class="ph b">Percent maxed</strong>: Specifies the average percent of the time
that all connections are in use.</li>
<li class="li"><strong class="ph b">JDBC time (milliseconds)</strong>: Specifies the average time, in
milliseconds, that is spent running Java Database
Connectivity (JDBC) calls. This time includes time that is spent in
the JDBC driver, network, and database. This metric applies to Version
5.0 data sources only.</li>
<li class="li"><strong class="ph b">Average use time (milliseconds)</strong>: Specifies the average
time in milliseconds that a connection is used. The value is the difference
between the time at which the connection is allocated and returned.
This value includes the JDBC operation time.</li>
<li class="li"><strong class="ph b">Number of returns</strong>: Specifies the total number of connections
that are returned to the pool.</li>
<li class="li"><strong class="ph b">Free pool size</strong>: Specifies the number of free connections
in the pool.</li>
<li class="li"><strong class="ph b">Number of allocates</strong>: Specifies the number of connections
that are allocated.</li>
<li class="li"><strong class="ph b">Average wait time (milliseconds)</strong>: Specifies the average
waiting time in milliseconds </li>
</ul>
</li>
<li class="li"><strong class="ph b">System module</strong>: <span class="ph" id="operand__was-nonwas">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span> The system module has the following metrics:<ul class="ul"><li class="li"><strong class="ph b">CPU utilization: Since server start</strong>: Specifies the average
CPU utilization since the server started.</li>
<li class="li"><strong class="ph b">CPU utilization: Last interval</strong>: Specifies the average CPU
utilization since the last query.</li>
<li class="li"><strong class="ph b">Free memory (KB)</strong>: Specifies a snapshot of free memory,
in kilobytes.</li>
</ul>
</li>
<li class="li"><strong class="ph b">Process module (for other servers)</strong>: <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span> The process module has the following
metrics:<ul class="ul"><li class="li"><strong class="ph b">Process resident memory (KB)</strong>: Specifies the process resident
memory, in kilobytes.</li>
<li class="li"><strong class="ph b">Process CPU utilization: Since server start</strong>: Specifies
the process CPU utilization since the server start.</li>
<li class="li"><strong class="ph b">Process CPU utilization: Last interval</strong>: Specifies the process
CPU utilization in the last interval.</li>
<li class="li"><strong class="ph b">Process total memory (KB)</strong>: Specifies the process total
memory, in kilobytes.</li>
</ul>
</li>
<li class="li"><strong class="ph b">EJB module</strong>: <span class="ph">These metrics can only
be used on servers that are running WebSphere Application Server. </span> The EJB
module has the following metrics:<ul class="ul"><li class="li"><strong class="ph b">Average concurrent active methods</strong>: Specifies the average
number methods that are active at the same time.</li>
<li class="li"><strong class="ph b">Total method calls</strong>: Specifies the number of calls to the
remote methods of the bean.</li>
<li class="li"><strong class="ph b">Methods submodule: Method loads</strong>: Specifies the method load
in the methods submodule.</li>
<li class="li"><strong class="ph b">Stores</strong>: Specifies the number of time that the bean data
was store in persistent storage.</li>
<li class="li"><strong class="ph b">Message count</strong>: Specifies the number of messages that were
delivered to the onMessage method of the bean. This message count
applies to message-driven beans.</li>
<li class="li"><strong class="ph b">Average concurrent live beans</strong>: Specifies the average beans
that are alive at the same time.</li>
<li class="li"><strong class="ph b">Removes</strong>: Specifies the number of times that beans were
removed.</li>
<li class="li"><strong class="ph b">Returns to pool</strong>: Specifies the number of calls that are
returning an object to the pool.</li>
<li class="li"><strong class="ph b">Passivates</strong>: Specifies the number of times that beans were
moved to passivated state.</li>
<li class="li"><strong class="ph b">Gets from pool</strong>: Specifies the number of calls that are
retrieving an object from the pool.</li>
<li class="li"><strong class="ph b">Drains from pool</strong>: Specifies the number of times that the
daemon found the pool idle and attempted to clean the pool.</li>
<li class="li"><strong class="ph b">Ready count</strong>: Specifies the number of bean instances that
are in ready state.</li>
<li class="li"><strong class="ph b">Average create time (milliseconds)</strong>: Specifies the average
time, in milliseconds, to run a bean create call. This time includes
the time to load the bean.</li>
<li class="li"><strong class="ph b">Returns discarded</strong> Specifies the number of times that the
returning object was discarded because the pool was full.</li>
<li class="li"><strong class="ph b">Activates</strong>: Specifies the number of times that beans were
activated. </li>
<li class="li"><strong class="ph b">Server session usage (percentage)</strong>: Specifies the percentage
of the ServerSession pool that is being used. This metric applies
to: message-driven beans.</li>
<li class="li"><strong class="ph b">Loads</strong>: Specifies the number of times that bean data was
loaded from persistent storage.</li>
<li class="li"><strong class="ph b">Message backout count</strong>: Specifies the number of backed out
messages that failed to be delivered to the onMessage method of the
bean. This metric applies to: message-driven beans.</li>
<li class="li"><strong class="ph b">Methods submodule: Method response time (milliseconds)</strong>:
Specifies the method response time, in milliseconds.</li>
<li class="li"><strong class="ph b">Passivation count</strong>: Specifies the number of beans that are
in a passivated state. </li>
<li class="li"><strong class="ph b">Pool size</strong>: Specifies the average number of objects that
are in the pool.</li>
<li class="li"><strong class="ph b">Load time (milliseconds)</strong>: Specifies the average time in
milliseconds for loading the bean data from persistent storage.</li>
<li class="li"><strong class="ph b">Average remove time (milliseconds)</strong>: Specifies the average
time, in milliseconds, to run a beanRemove call. This time includes
the time at the database.</li>
<li class="li"><strong class="ph b">Gets found</strong>: Specifies the number of times that a retrieve
call found an available object in the pool.</li>
<li class="li"><strong class="ph b">Activation time</strong>: Specifies the average time, in milliseconds,
for activating a bean object</li>
<li class="li"><strong class="ph b">Average drain size</strong>: Specifies the average number of objects
that are discarded in each drain.</li>
<li class="li"><strong class="ph b">Methods submodule: Method calls</strong>: Specifies the number of
method calls.</li>
<li class="li"><strong class="ph b">Destroys</strong>: Specifies the number of times that beans were
destroyed.</li>
<li class="li"><strong class="ph b">Average server session wait time (milliseconds)</strong>: Specifies
the average time, in milliseconds, that is required to obtain a server
session from the pool. This metric applies to message-driven beans.</li>
<li class="li"><strong class="ph b">Creates</strong>: Specifies the number of times that beans were
created.</li>
<li class="li"><strong class="ph b">Average method response time (milliseconds)</strong>: Specifies
the average response time, in milliseconds, that elapses for remote
method calls on the bean.</li>
<li class="li"><strong class="ph b">Instantiates</strong>: Specifies the number of times that beans
were instantiated.</li>
<li class="li"><strong class="ph b">Store time (milliseconds)</strong>: Specifies the average time,
in milliseconds, for storing the bean data to persistent storage.</li>
<li class="li"><strong class="ph b">Passivation time (milliseconds)</strong>: Specifies the average
time, in milliseconds, for bean object passivation to occur.</li>
</ul>
</li>
<li class="li"><strong class="ph b">Web application module:</strong> <span class="ph">These metrics can only
be used on servers that are running WebSphere Application Server. </span> Web
application modules have the following metrics:<ul class="ul"><li class="li"><strong class="ph b">Number of errors</strong>: Specifies the total number of times that
an error has been received from the servlet or JavaServer Pages (JSP)
files.</li>
<li class="li"><strong class="ph b">Total requests</strong>: Specifies the total number of requests
that a servlet processed.</li>
<li class="li"><strong class="ph b">Response time (milliseconds)</strong>: Specifies the average response
time, in milliseconds, in which servlet requests finish.</li>
<li class="li"><strong class="ph b">Concurrent requests</strong>: Specifies the number of requests that
are currently processing.</li>
<li class="li"><strong class="ph b">Number of reloads</strong>: Specifies the number of servlets that
are reloaded.</li>
<li class="li"><strong class="ph b">Number of loaded servlets</strong>: Specifies the number of servlets
that are loaded.</li>
</ul>
</li>
<li class="li"><strong class="ph b">JVM runtime module: </strong><span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span> Java Virtual Machine (JVM) runtime
modules have the following metrics:<ul class="ul"><li class="li"><strong class="ph b">Free memory (KB)</strong>: Specifies the free memory, in kilobytes,
in the JVM runtime.</li>
<li class="li"><strong class="ph b">Up time (seconds)</strong>: Specifies the amount of time, in seconds,
that the JVM has been running.</li>
<li class="li"><strong class="ph b">Total memory (KB)</strong>: Specifies the total memory, in kilobytes,
in the JVM runtime.</li>
<li class="li"><strong class="ph b">Used memory (KB)</strong>: Specifies the amount of used memory,
in kilobytes, in the JVM runtime.</li>
</ul>
</li>
<li class="li"><strong class="ph b">Thread pool module: </strong><span class="ph">These metrics can only
be used on servers that are running WebSphere Application Server. </span> Thread
pool modules have the following metrics:<ul class="ul"><li class="li"><strong class="ph b">Number of thread stops</strong>: Specifies the number of threads
that are declared as stopped.</li>
<li class="li"><strong class="ph b">Percent maxed</strong>: Specifies the average percent of the time
that all threads are in use.</li>
<li class="li"><strong class="ph b">Average active time (milliseconds</strong>: Specifies the average
time in milliseconds that the threads are in active state.</li>
<li class="li"><strong class="ph b">Thread destroys</strong>: Specifies the total number of threads
that are destroyed.</li>
<li class="li"><strong class="ph b">Pool size</strong>: Specifies the average number of threads in a
pool.</li>
<li class="li"><strong class="ph b">Thread creates</strong>: Specifies the total number of threads that
are created.</li>
<li class="li"><strong class="ph b">Concurrently hung threads</strong>: Specifies the number of threads
that are concurrently stopped.</li>
<li class="li"><strong class="ph b">Number of cleared thread stops</strong>: Specifies the number of
thread stops that are cleared.</li>
<li class="li"><strong class="ph b">Active threads</strong>: Specifies the number of threads that are
concurrently active.</li>
</ul>
</li>
</ul>
<div class="p"><strong class="ph b">Subexpression format for PMI Metric: From server start:</strong><pre class="pre">PMIMetric_FromServerStart$moduleName$metricName operator LongValueL (with "L" suffix)</pre>
</div>
<div class="p"><strong class="ph b">Example:</strong> <pre class="pre">PMIMetric_FromServerStart$systemModule$cpuUtilization  &gt;  90L</pre>
</div>
<div class="p"><strong class="ph b">Subexpression
format for PMI Metric: Last reported interval:</strong><pre class="pre">PMIMetric_FromLastInterval$moduleName$metricName operator LongValueL (with "L" suffix)</pre>
</div>
<div class="p"><strong class="ph b">Example:</strong> <pre class="pre">PMIMetric_FromLastInterval$webAppModule$responseTime  &gt; 200L</pre>
</div>
</li>
<li class="li"><strong class="ph b">ODR server level metric: From server start</strong><div class="p">You can use
a subset of server level metrics that the on demand router (ODR) publishes.
These metrics are cumulative and reported since the server start. <dl class="dl"><dt class="dt dlterm">Metric name</dt>
<dd class="dd"><p class="p">You can use the following server level metrics:</p>
<ul class="ul"><li class="li"><strong class="ph b">Departs</strong>:  Specifies the number  of requests
that are dispatched from the queue to the server during the reported
interval.  A  request is considered to be dispatched just once, even
if it fails at the first server and is retried at another time.  The
next event after dispatch is return. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Response time (milliseconds)</strong>:  Specifies
an average response time for requests. To calculate this average,
add the sum of the response times for requests that returned from
the server to the client during the reported interval. The sum is
in units of milliseconds. Divide by the serviced metric value to get
the average response time.  The  response time of a request is the
sum of the request's waiting time and service time. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Currently executing requests</strong>: Specifies
the number of requests that are running at the end of the reported
interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__serviceTime"><strong class="ph b">Service time (milliseconds)</strong>  Specifies
the average service time for requests. To calculate this average,
add the sum of each request service time for requests that returned
to the server during the reported interval. The sum is in units of
milliseconds.  Divide by the serviced metric value in the same interval
to get the average.  The service time of a request is the time from
dispatch to return. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Wait time (milliseconds)</strong>:  Specifies the
average wait time for requests. To calculate this average, add the
sum of the time that each request spent waiting in the queue over
the reported interval. The sum is in units of milliseconds.  Divide
by the number of departs to get the average wait time.  Dropped requests
do not contribute to this sum. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Errors</strong>: Specifies the number of requests that
returned from the server with an error indicator during the reported
interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Serviced</strong>: Specifies  the number of requests
that returned from server to client during the reported interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Timeouts</strong>: Specifies the number of requests
that returned due to service timeout during the reported interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
</ul>
</dd>
</dl>
</div>
<div class="p"><strong class="ph b">Subexpression format:</strong><pre class="pre">ODRServerMetric_FromServerStart$metricName operator LongValueL (with "L" suffix)</pre>
</div>
<div class="p"><strong class="ph b">Example:</strong> <pre class="pre">ODRServerMetric_FromServerStart$errors  &gt; 100L</pre>
</div>
</li>
<li class="li"><strong class="ph b">ODR server level metric: Last reported interval</strong><div class="p">You can
use the same set of metrics as the ODR server level metric: From server
start operand. This operand uses an average of the reported values
in the last interval. The interval is the length of the health controller
cycle.<ul class="ul"><li class="li"><strong class="ph b">Departs</strong>:  Specifies the number  of requests
that are dispatched from the queue to the server during the reported
interval.  A  request is considered to be dispatched just once, even
if it fails at the first server and is retried at another time.  The
next event after dispatch is return. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Response time (milliseconds)</strong>:  Specifies
an average response time for requests. To calculate this average,
add the sum of the response times for requests that returned from
the server to the client during the reported interval. The sum is
in units of milliseconds. Divide by the serviced metric value to get
the average response time.  The  response time of a request is the
sum of the request's waiting time and service time. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Currently executing requests</strong>: Specifies
the number of requests that are running at the end of the reported
interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Service time (milliseconds)</strong>  Specifies
the average service time for requests. To calculate this average,
add the sum of each request service time for requests that returned
to the server during the reported interval. The sum is in units of
milliseconds.  Divide by the serviced metric value in the same interval
to get the average.  The service time of a request is the time from
dispatch to return. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Wait time (milliseconds)</strong>:  Specifies the
average wait time for requests. To calculate this average, add the
sum of the time that each request spent waiting in the queue over
the reported interval. The sum is in units of milliseconds.  Divide
by the number of departs to get the average wait time.  Dropped requests
do not contribute to this sum. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Errors</strong>: Specifies the number of requests that
returned from the server with an error indicator during the reported
interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Serviced</strong>: Specifies  the number of requests
that returned from server to client during the reported interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Timeouts</strong>: Specifies the number of requests
that returned due to service timeout during the reported interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
</ul>
</div>
<div class="p"><strong class="ph b">Subexpression format:</strong><pre class="pre">ODRServerMetric_FromLastInterval$metricName operator LongValue (with "L" suffix)</pre>
</div>
<div class="p"><strong class="ph b">Example:</strong> <pre class="pre">ODRServerMetric_FromLastInterval$serviced  &gt; 10000L</pre>
</div>
</li>
<li class="li"><strong class="ph b">ODR cell level metric: From ODR start</strong><p class="p">You can use a subset
of cell level metrics that the ODR publishes. These metrics are cumulative
and reported since the server start. You can use the following set
of metrics: </p>
<ul class="ul"><li class="li" id="operand__departs"><strong class="ph b">Departs</strong>:  Specifies the number  of requests
that are dispatched from the queue to the server during the reported
interval.  A  request is considered to be dispatched just once, even
if it fails at the first server and is retried at another time.  The
next event after dispatch is return. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__responseTime"><strong class="ph b">Response time (milliseconds)</strong>:  Specifies
an average response time for requests. To calculate this average,
add the sum of the response times for requests that returned from
the server to the client during the reported interval. The sum is
in units of milliseconds. Divide by the serviced metric value to get
the average response time.  The  response time of a request is the
sum of the request's waiting time and service time. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__currentQueueLength"><strong class="ph b">Current queue length</strong>: Specifies
the length of the queue at the end of the reported interval.</li>
<li class="li"><strong class="ph b">Service time (milliseconds)</strong></li>
<li class="li" id="operand__errors"><strong class="ph b">Errors</strong>: Specifies the number of requests that
returned from the server with an error indicator during the reported
interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__avgqueuelength"><strong class="ph b">Average queue length</strong>: Specifies the
average length of the queue. To calculate this average, add the sum
of the queue lengths that are reported at each request arrival before
insertion, and divide the sum by the number of arrivals. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__serviced"><strong class="ph b">Serviced</strong>: Specifies  the number of requests
that returned from server to client during the reported interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__timeouts"><strong class="ph b">Timeouts</strong>: Specifies the number of requests
that returned due to service timeout during the reported interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__currentlyexecuting"><strong class="ph b">Currently executing requests</strong>: Specifies
the number of requests that are running at the end of the reported
interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__arrivals"><strong class="ph b">Arrivals</strong>:  Specifies the number of requests
that arrived during the reported interval. The next event, if any,
after arrival is either dispatch or drop. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__queueoverflowdrops"><strong class="ph b">Queue overflow drops</strong>: Specifies
the number of requests that were initially accepted into the queue
at some time and then, at some time during the reported interval,
were ejected from the queue.<span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__queuedrops"><strong class="ph b">Queue drops</strong>: Specifies the number of requests
that were initially accepted into the queue at some time and then
were ejected from the queue at some time during the reported interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__delayed"><strong class="ph b">Delayed</strong>: Specifies the number of requests
that arrived during the reported interval and were not immediately
dispatched or dropped. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li" id="operand__waitTime"><strong class="ph b">Wait time (milliseconds)</strong>:  Specifies the
average wait time for requests. To calculate this average, add the
sum of the time that each request spent waiting in the queue over
the reported interval. The sum is in units of milliseconds.  Divide
by the number of departs to get the average wait time.  Dropped requests
do not contribute to this sum. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
</ul>
<div class="p"><strong class="ph b">Subexpression format:</strong><pre class="pre">ODRCellMetric_FromServerStart$metricName operator LongValue (with "L" suffix)</pre>
</div>
<div class="p"><strong class="ph b">Example:</strong> <pre class="pre">ODRCellMetric_FromServerStart$arrivals  &gt; 10000L</pre>
</div>
</li>
<li class="li"><strong class="ph b">ODR cell level metric: Last reported interval</strong><div class="p">You can
use the same set of metrics as the ODR cell level metric: From server
start operand. This operand uses an average of the reported values
in the last interval. The interval is the length of the health controller
cycle.<ul class="ul"><li class="li"><strong class="ph b">Departs</strong>:  Specifies the number  of requests
that are dispatched from the queue to the server during the reported
interval.  A  request is considered to be dispatched just once, even
if it fails at the first server and is retried at another time.  The
next event after dispatch is return. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Response time (milliseconds)</strong>:  Specifies
an average response time for requests. To calculate this average,
add the sum of the response times for requests that returned from
the server to the client during the reported interval. The sum is
in units of milliseconds. Divide by the serviced metric value to get
the average response time.  The  response time of a request is the
sum of the request's waiting time and service time. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Current queue length</strong>: Specifies
the length of the queue at the end of the reported interval.</li>
<li class="li"><strong class="ph b">Service time (milliseconds)</strong>  Specifies
the average service time for requests. To calculate this average,
add the sum of each request service time for requests that returned
to the server during the reported interval. The sum is in units of
milliseconds.  Divide by the serviced metric value in the same interval
to get the average.  The service time of a request is the time from
dispatch to return. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Errors</strong>: Specifies the number of requests that
returned from the server with an error indicator during the reported
interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Average queue length</strong>: Specifies the
average length of the queue. To calculate this average, add the sum
of the queue lengths that are reported at each request arrival before
insertion, and divide the sum by the number of arrivals. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Serviced</strong>: Specifies  the number of requests
that returned from server to client during the reported interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Timeouts</strong>: Specifies the number of requests
that returned due to service timeout during the reported interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Currently executing requests</strong>: Specifies
the number of requests that are running at the end of the reported
interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Arrivals</strong>:  Specifies the number of requests
that arrived during the reported interval. The next event, if any,
after arrival is either dispatch or drop. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Queue overflow drops</strong>: Specifies
the number of requests that were initially accepted into the queue
at some time and then, at some time during the reported interval,
were ejected from the queue.<span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Queue drops</strong>: Specifies the number of requests
that were initially accepted into the queue at some time and then
were ejected from the queue at some time during the reported interval. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Delayed</strong>: Specifies the number of requests
that arrived during the reported interval and were not immediately
dispatched or dropped. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
<li class="li"><strong class="ph b">Wait time (milliseconds)</strong>:  Specifies the
average wait time for requests. To calculate this average, add the
sum of the time that each request spent waiting in the queue over
the reported interval. The sum is in units of milliseconds.  Divide
by the number of departs to get the average wait time.  Dropped requests
do not contribute to this sum. <span class="ph">These metrics can be
used on servers that are running WebSphere Application
Server or that are running other middleware servers with the node
agent.</span></li>
</ul>
</div>
<div class="p"><strong class="ph b">Subexpression format:</strong><pre class="pre">ODRCellMetric_FromLastInterval$metricName operator LongValue (with "L" suffix)</pre>
</div>
<div class="p"><strong class="ph b">Example:</strong> <pre class="pre">ODRCellMetric_FromLastInterval$timeouts  &gt; 100L</pre>
</div>
</li>
<li class="li"><strong class="ph b">MBean operation metric: Long return type</strong> and <strong class="ph b">MBean operation
metric: String return type</strong><p class="p">For Managed Bean (Mbean) operation
metric operands, you must specify the Object name query string and
the MBean method name.<span class="ph">These metrics can only
be used on servers that are running WebSphere Application Server. </span></p>
<dl class="dl"><dt class="dt dlterm"><a name="operand__objectnameqs"><!-- --></a><strong class="ph b">Object name query string</strong></dt>
<dd class="dd">When you are creating the Object name query string, all special
characters must escaped with a backslash character. The backend expects
the object name query string in a form where all special characters
have been escaped appropriately.<p class="p">The value that you enter for the
object name query string must have both the <samp class="ph tt">process=&lt;process_name&gt;</samp>,
and <samp class="ph tt">node=&lt;node_name&gt;</samp> strings specified, or none specified.
If you specify both <samp class="ph tt">process=&lt;process_name&gt;</samp>, and <samp class="ph tt">node=&lt;node_name&gt;</samp>,
the backend creates a singleton MBeanSensor sensor that senses the
particular MBean on a server and node. If you specify none, the backend
appends the name of the current server as the process name and the
name of the current node as the node name, creating a MBeanSensor
sensor for each server to which the health policy applies. If you
specify only one of the two<samp class="ph tt">process=&lt;process_name&gt;</samp> or <samp class="ph tt">node=&lt;node_name&gt;</samp>,
an error results.</p>
</dd>
<dt class="dt dlterm">MBean method name</dt>
<dd class="dd">Specifies the name of the MBean method to invoke.</dd>
</dl>
<div class="p"><strong class="ph b">Subexpression format long metrics:</strong><pre class="pre">MBeanOperationMetric_TypeLong$objectNameQueryString$methodName operator LongValueL (with "L" suffix)</pre>
</div>
<div class="p"><strong class="ph b">Example
for long metrics:</strong> <pre class="pre">MBeanOperationMetric_TypeLong$WebSphere\:\*\,type\=HealthConditionLanguageInitializer\,node\=hipods3\,process\=nodeagent$getNumberOfOperands  &gt; 10L</pre>
</div>
<div class="p"><strong class="ph b">Subexpression
format for string metrics:</strong><pre class="pre">MBeanOperationMetric_TypeString$objectNameQueryString$methodName operator StringValue</pre>
</div>
<div class="p"><strong class="ph b">Example
for string metrics:</strong> <pre class="pre">MBeanOperationMetric_TypeString$WebSphere\:\*\,type\=HealthConditionLanguageInitializer\,node\=hipods3\,process\=nodeagent$getOperands  = 't'</pre>
</div>
</li>
<li class="li"><strong class="ph b">MBean attribute metric: Long return type</strong> and <strong class="ph b">MBean attribute
metric: String return type</strong><div class="p">The MBean attribute metrics are used
for querying an attribute of a MBean rather than invoking a method
on the MBean. The operand takes the Object name query string and the
attribute name as inputs. <span class="ph" id="operand__wasonly">These metrics can only
be used on servers that are running WebSphere Application Server. </span><dl class="dl"><dt class="dt dlterm"><strong class="ph b">Object name query string</strong></dt>
<dd class="dd">When you are creating the Object name query string, all special
characters must escaped with a backslash character. The backend expects
the object name query string in a form where all special characters
have been escaped appropriately.<p class="p">The value that you enter for the
object name query string must have both the <samp class="ph tt">process=&lt;process_name&gt;</samp>,
and <samp class="ph tt">node=&lt;node_name&gt;</samp> strings specified, or none specified.
If you specify both <samp class="ph tt">process=&lt;process_name&gt;</samp>, and <samp class="ph tt">node=&lt;node_name&gt;</samp>,
the backend creates a singleton MBeanSensor sensor that senses the
particular MBean on a server and node. If you specify none, the backend
appends the name of the current server as the process name and the
name of the current node as the node name, creating a MBeanSensor
sensor for each server to which the health policy applies. If you
specify only one of the two<samp class="ph tt">process=&lt;process_name&gt;</samp> or <samp class="ph tt">node=&lt;node_name&gt;</samp>,
an error results.</p>
</dd>
<dt class="dt dlterm">Attribute name</dt>
<dd class="dd">Specifies the attribute that is queried on the MBean.</dd>
</dl>
</div>
<div class="p"><strong class="ph b">Subexpression format for long metrics:</strong><pre class="pre">MBeanAttributeMetric_TypeLong$objectNameQueryString$attributeName operator LongValue</pre>
</div>
<div class="p"><strong class="ph b">Example
for long metrics:</strong> <pre class="pre">MBeanAttributeMetric_TypeLong$WebSphere\:\*\,type\=HealthConditionLanguageInitializer\,node\=hipods3\,process\=nodeagent$NumberOfOperands &gt; 10L</pre>
</div>
<div class="p"><strong class="ph b">Subexpression
format for string metrics:</strong><pre class="pre">MBeanAttributeMetric_TypeString$objectNameQueryString$attributeName operator StringValue</pre>
</div>
<div class="p"><strong class="ph b">Example
for string metrics:</strong> <pre class="pre">MBeanAttributeMetric_TypeString$WebSphere\:\*\,type\=HealthConditionLanguageInitializer\,node\=hipods3\,process\=nodeagent$OperatorList  =  'test'</pre>
</div>
</li>
<li class="li"><strong class="ph b">URL return code metric</strong><p class="p">With this operand, you can ping
any relative path (URI) on the server that is the target of this policy.
The return value is used in the condition expression for the custom
health policy.</p>
<dl class="dl"><dt class="dt dlterm">URL port number</dt>
<dd class="dd">Specifies the port number to ping.</dd>
<dt class="dt dlterm">URL relative path</dt>
<dd class="dd">Specifies the URL to ping. Any special characters in the string
must be escaped with a backslash (<samp class="ph tt">\</samp>) character.</dd>
<dt class="dt dlterm">Protocol</dt>
<dd class="dd">Specifies the protocol to use. For example: <kbd class="ph userinput">http://</kbd>,
or <kbd class="ph userinput">https://</kbd> </dd>
<dt class="dt dlterm">Value</dt>
<dd class="dd">Specifies an integer that is the expected return code of the ping.</dd>
</dl>
<p class="p"> You can use this operand to ping any general purpose
URL by selecting the on demand router (ODR) as the target of the health
policy and by setting the appropriate routing rules in the ODR. </p>
<p class="p">You
can use this operand to select members that are running WebSphere Application Server, or that are
running other middleware software with the node agent.</p>
<div class="p"><strong class="ph b">Subexpression
format:</strong><pre class="pre">URLReturnCodeMetric$portNumber$relativePath operator IntValue</pre>
</div>
<div class="p"><strong class="ph b">Example:</strong> <pre class="pre">URLReturnCodeMetric$9060$ibm\/console\/login\.do = 200</pre>
The
URL sensor returns<samp class="ph tt">0</samp> if the Web site cannot be reached: <pre class="pre">URLReturnCodeMetric$9060$ibm\/console\/login\.do = 0  </pre>
</div>
</li>
</ul>
</div>
</div>
<div class="topic nested1" xml:lang="en-us" id="operator"><h2 class="title topictitle2">Operator</h2>
<div class="body"><div class="p"><ul class="ul"><li class="li"><strong class="ph b">Equals (=)</strong>: The equality operator expresses a case-sensitive
match.</li>
<li class="li"><strong class="ph b">Not Equals (&lt;&gt;)</strong>: The not equal operator expresses that
the operand value is not equal to the value you enter.</li>
<li class="li"><strong class="ph b">Greater Than (&gt;)</strong>: The greater-than operator is for use
with numbers.</li>
<li class="li"><strong class="ph b">Greater Than or Equals (&gt;=)</strong>: The greater-than or equal
to operator is for use with numbers.</li>
<li class="li"><strong class="ph b">Less Than (&lt;) </strong>: The less-than operator is for use with
numbers.</li>
<li class="li"><strong class="ph b">Less Than or Equals (&lt;=)</strong>: The less-than or equal to
operator is for use with numbers.</li>
<li class="li"><strong class="ph b">Between (BETWEEN)</strong>: The value must be between a <strong class="ph b">Lower
bound</strong> and <strong class="ph b">Upper bound</strong> that you specify.</li>
<li class="li"><strong class="ph b">In (IN)</strong>: The value must be in a list of values. You can
type in values and add them to a list.</li>
</ul>
</div>
</div>
</div>
<div class="topic nested1" id="genTopProcId8"><h2 class="title topictitle2">Value</h2>
<div class="body"><p class="shortdesc">Depending on the operator that you choose, type in a value
for the subexpression that you want to create.</p>
</div>
</div>
<div class="topic nested1" xml:lang="en-us" id="subexpression"><h2 class="title topictitle2">Subexpression</h2>
<div class="body"><p class="shortdesc">After you click <span class="ph uicontrol">Generate subexpression</span>,
this field displays the generated subexpression fragment based on
the options that you selected. To add this subexpression to your custom
health condition, click <span class="ph uicontrol">Append</span>.</p>
</div>
</div>
<div class="related-links">
<div class="relinfo"><strong>Related information</strong>:<br />
<div><a class="link build" href="hc_collection.html" title="Use this page to create and modify health policies. Health policies support two main approaches to maintaining a healthy environment: detection and prevention.">Health policy collection</a></div>
<div><a class="link build" href="hc_detail_main.html" title="Use this page to modify existing health policies. Health policies are used to maintain a healthy environment using prevention and detection methodologies.">Health policy settings</a></div>
<div><a class="link build" href="hc_detail_main_new.html" title="Use this page to create health policies, which are used to perform a variety of health-based assessments on clusters, dynamic clusters, and application server instances running on nodes.">Creating a health policy: Define health policy general properties</a></div>
<div><a class="link build" href="hc_appservers_detail_new.html" title="Use this page to assign membership properties to health policies.">Creating a health policy: Specify members to monitor</a></div>
<div><a class="link build" href="hc_action_collection.html" title="By default, you can define a health policy to execute any of the predefined health actions, such as restart a server, when a health policy is breached. Configure a custom action when you want your environment to take an action other than these defaults.">Custom actions collection</a></div>
<div><a class="link build" href="hc_custom_action.html" title="Specify details for your Java and non-Java custom actions.">Custom actions settings</a></div>
<div><a class="link build" href="hc_condition_detail_new.html" title="Use this page to define the specific behavior of the health policy.">Creating a health policy: Define health condition properties</a></div>
</div>
</div>
<hr align="left" /><br /><span class="runningfooter">File name: hc_condition_subex.html</span></body>
</html>